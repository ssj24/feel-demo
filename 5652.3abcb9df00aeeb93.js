"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5652],{7423:(oe,$,p)=>{p.d($,{Uw:()=>L,fo:()=>A});var h=p(5861);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var C=(()=>{return(c=C||(C={})).Unimplemented="UNIMPLEMENTED",c.Unavailable="UNAVAILABLE",C;var c})();class w extends Error{constructor(o,a,f){super(o),this.message=o,this.code=a,this.data=f}}const v=c=>{var o,a,f,_,u;const k=c.CapacitorCustomPlatform||null,m=c.Capacitor||{},D=m.Plugins=m.Plugins||{},M=c.CapacitorPlatforms,Y=(null===(o=null==M?void 0:M.currentPlatform)||void 0===o?void 0:o.getPlatform)||(()=>null!==k?k.name:(c=>{var o,a;return null!=c&&c.androidBridge?"android":null!==(a=null===(o=null==c?void 0:c.webkit)||void 0===o?void 0:o.messageHandlers)&&void 0!==a&&a.bridge?"ios":"web"})(c)),i=(null===(a=null==M?void 0:M.currentPlatform)||void 0===a?void 0:a.isNativePlatform)||(()=>"web"!==Y()),t=(null===(f=null==M?void 0:M.currentPlatform)||void 0===f?void 0:f.isPluginAvailable)||(O=>{const F=Z.get(O);return!!(null!=F&&F.platforms.has(Y())||r(O))}),r=(null===(_=null==M?void 0:M.currentPlatform)||void 0===_?void 0:_.getPluginHeader)||(O=>{var F;return null===(F=m.PluginHeaders)||void 0===F?void 0:F.find(X=>X.name===O)}),Z=new Map,fe=(null===(u=null==M?void 0:M.currentPlatform)||void 0===u?void 0:u.registerPlugin)||((O,F={})=>{const X=Z.get(O);if(X)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),X.proxy;const K=Y(),ee=r(O);let I;const Ce=function(){var J=(0,h.Z)(function*(){return!I&&K in F?I=I="function"==typeof F[K]?yield F[K]():F[K]:null!==k&&!I&&"web"in F&&(I=I="function"==typeof F.web?yield F.web():F.web),I});return function(){return J.apply(this,arguments)}}(),le=J=>{let N;const j=(...W)=>{const H=Ce().then(R=>{const Q=((J,N)=>{var j,W;if(!ee){if(J)return null===(W=J[N])||void 0===W?void 0:W.bind(J);throw new w(`"${O}" plugin is not implemented on ${K}`,C.Unimplemented)}{const H=null==ee?void 0:ee.methods.find(R=>N===R.name);if(H)return"promise"===H.rtype?R=>m.nativePromise(O,N.toString(),R):(R,Q)=>m.nativeCallback(O,N.toString(),R,Q);if(J)return null===(j=J[N])||void 0===j?void 0:j.bind(J)}})(R,J);if(Q){const ne=Q(...W);return N=null==ne?void 0:ne.remove,ne}throw new w(`"${O}.${J}()" is not implemented on ${K}`,C.Unimplemented)});return"addListener"===J&&(H.remove=(0,h.Z)(function*(){return N()})),H};return j.toString=()=>`${J.toString()}() { [capacitor code] }`,Object.defineProperty(j,"name",{value:J,writable:!1,configurable:!1}),j},me=le("addListener"),pe=le("removeListener"),ye=(J,N)=>{const j=me({eventName:J},N),W=function(){var R=(0,h.Z)(function*(){const Q=yield j;pe({eventName:J,callbackId:Q},N)});return function(){return R.apply(this,arguments)}}(),H=new Promise(R=>j.then(()=>R({remove:W})));return H.remove=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield W()}),H},de=new Proxy({},{get(J,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return ee?ye:me;case"removeListener":return pe;default:return le(N)}}});return D[O]=de,Z.set(O,{name:O,proxy:de,platforms:new Set([...Object.keys(F),...ee?[K]:[]])}),de});return m.convertFileSrc||(m.convertFileSrc=O=>O),m.getPlatform=Y,m.handleError=O=>c.console.error(O),m.isNativePlatform=i,m.isPluginAvailable=t,m.pluginMethodNoop=(O,F,X)=>Promise.reject(`${X} does not have an implementation of "${F}".`),m.registerPlugin=fe,m.Exception=w,m.DEBUG=!!m.DEBUG,m.isLoggingEnabled=!!m.isLoggingEnabled,m.platform=m.getPlatform(),m.isNative=m.isNativePlatform(),m},T=(c=>c.Capacitor=v(c))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),A=T.registerPlugin;class L{constructor(o){this.listeners={},this.windowListeners={},o&&(console.warn(`Capacitor WebPlugin "${o.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=o)}addListener(o,a){var f=this;this.listeners[o]||(this.listeners[o]=[]),this.listeners[o].push(a);const u=this.windowListeners[o];u&&!u.registered&&this.addWindowListener(u);const k=function(){var D=(0,h.Z)(function*(){return f.removeListener(o,a)});return function(){return D.apply(this,arguments)}}(),m=Promise.resolve({remove:k});return Object.defineProperty(m,"remove",{value:(D=(0,h.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield k()}),function(){return D.apply(this,arguments)})}),m;var D}removeAllListeners(){var o=this;return(0,h.Z)(function*(){o.listeners={};for(const a in o.windowListeners)o.removeWindowListener(o.windowListeners[a]);o.windowListeners={}})()}notifyListeners(o,a){const f=this.listeners[o];f&&f.forEach(_=>_(a))}hasListeners(o){return!!this.listeners[o].length}registerWindowListener(o,a){this.windowListeners[a]={registered:!1,windowEventName:o,pluginEventName:a,handler:f=>{this.notifyListeners(a,f)}}}unimplemented(o="not implemented"){return new T.Exception(o,C.Unimplemented)}unavailable(o="not available"){return new T.Exception(o,C.Unavailable)}removeListener(o,a){var f=this;return(0,h.Z)(function*(){const _=f.listeners[o];if(!_)return;const u=_.indexOf(a);f.listeners[o].splice(u,1),f.listeners[o].length||f.removeWindowListener(f.windowListeners[o])})()}addWindowListener(o){window.addEventListener(o.windowEventName,o.handler),o.registered=!0}removeWindowListener(o){!o||(window.removeEventListener(o.windowEventName,o.handler),o.registered=!1)}}const x=c=>encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class ie extends L{setCookie(o){return(0,h.Z)(function*(){try{const a=x(o.key),f=x(o.value),_=`; expires=${(o.expires||"").replace("expires=","")}`,u=(o.path||"/").replace("path=","");document.cookie=`${a}=${f||""}${_}; path=${u}`}catch(a){return Promise.reject(a)}})()}deleteCookie(o){return(0,h.Z)(function*(){try{document.cookie=`${o.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}})()}clearCookies(){return(0,h.Z)(function*(){try{const o=document.cookie.split(";")||[];for(const a of o)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(o){return Promise.reject(o)}})()}clearAllCookies(){var o=this;return(0,h.Z)(function*(){try{yield o.clearCookies()}catch(a){return Promise.reject(a)}})()}}A("CapacitorCookies",{web:()=>new ie});const G=function(){var c=(0,h.Z)(function*(o){return new Promise((a,f)=>{const _=new FileReader;_.onload=()=>{const u=_.result;a(u.indexOf(",")>=0?u.split(",")[1]:u)},_.onerror=u=>f(u),_.readAsDataURL(o)})});return function(a){return c.apply(this,arguments)}}();class ce extends L{request(o){return(0,h.Z)(function*(){const a=((c,o={})=>{const a=Object.assign({method:c.method||"GET",headers:c.headers},o),_=((c={})=>{const o=Object.keys(c);return Object.keys(c).map(_=>_.toLocaleLowerCase()).reduce((_,u,k)=>(_[u]=c[o[k]],_),{})})(c.headers)["content-type"]||"";if("string"==typeof c.data)a.body=c.data;else if(_.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[k,m]of Object.entries(c.data||{}))u.set(k,m);a.body=u.toString()}else if(_.includes("multipart/form-data")){const u=new FormData;if(c.data instanceof FormData)c.data.forEach((m,D)=>{u.append(D,m)});else for(const m of Object.keys(c.data))u.append(m,c.data[m]);a.body=u;const k=new Headers(a.headers);k.delete("content-type"),a.headers=k}else(_.includes("application/json")||"object"==typeof c.data)&&(a.body=JSON.stringify(c.data));return a})(o,o.webFetchExtra),f=((c,o=!0)=>c?Object.entries(c).reduce((f,_)=>{const[u,k]=_;let m,D;return Array.isArray(k)?(D="",k.forEach(M=>{m=o?encodeURIComponent(M):M,D+=`${u}=${m}&`}),D.slice(0,-1)):(m=o?encodeURIComponent(k):k,D=`${u}=${m}`),`${f}&${D}`},"").substr(1):null)(o.params,o.shouldEncodeUrlParams),_=f?`${o.url}?${f}`:o.url,u=yield fetch(_,a),k=u.headers.get("content-type")||"";let D,M,{responseType:m="text"}=u.ok?o:{};switch(k.includes("application/json")&&(m="json"),m){case"arraybuffer":case"blob":M=yield u.blob(),D=yield G(M);break;case"json":D=yield u.json();break;default:D=yield u.text()}const z={};return u.headers.forEach((Y,q)=>{z[q]=Y}),{data:D,headers:z,status:u.status,url:u.url}})()}get(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"GET"}))})()}post(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"POST"}))})()}put(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"PUT"}))})()}patch(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"PATCH"}))})()}delete(o){var a=this;return(0,h.Z)(function*(){return a.request(Object.assign(Object.assign({},o),{method:"DELETE"}))})()}}A("CapacitorHttp",{web:()=>new ce})},2181:(oe,$,p)=>{p.d($,{o:()=>S});var h=p(520);class e{}var l=p(2096);let S=(()=>{class y{constructor(g){this.http=g;const C=new Date;this.currentYear=C.getFullYear(),this.currentMonthIndex=C.getMonth()}getHttpData(g,C){console.log("calSvc-gethttpdata entered");const w=11===g?C+1:C,P=11===g?0:g+1,v={message:"MonthDiary",email:"test@test.com",StartDate:this.getDateFormatted(new Date(C,g,1)),EndDate:this.getDateFormatted(new Date(w,P,0))};return this.http.post("/api/MonthDiary/",v,{headers:(new h.WM).set("Content-Type","application/json")})}getData(g=this.currentMonthIndex,C=this.currentYear){return console.log("getdata entered"),this.getHttpData(g,C)}getCurrentMonth(g=this.currentMonthIndex,C=this.currentYear){return this.getMonth(g,C)}getMonth(g=this.currentMonthIndex,C=this.currentYear){const w=[],P=this.createDay(C,g,1),v=0===g?C-1:C,E=0===g?11:g-1,T=11===g?C+1:C,A=11===g?0:g+1;let U=new Date(C,g,0).getDate();const te=new Date(C,g+1,0).getDate();for(let B=1;B<P.weekDayNumber;B++){const x=new e;x.date=new Date(v,E,U),x.year=v,x.monthIndex=E,x.weekDayNumber=B,x.dayNumber=U,x.feelings=["none","none","none"],w.unshift(x),U--}w.push(P);for(let B=2;B<=te;B++)w.push(this.createDay(C,g,B));let L=1;for(let B=w[w.length-1].weekDayNumber+1;B<=7;B++){const x=new e;7===B?(x.date=new Date(T,A,w[w.length-1].dayNumber+1),x.year=T,x.monthIndex=A,x.weekDayNumber=0,x.dayNumber=L,x.feelings=["none","none","none"]):(x.date=new Date(T,A,L),x.year=T,x.monthIndex=A,x.weekDayNumber=B,x.dayNumber=L,x.feelings=["none","none","none"],L++),w.push(x)}return console.log("getmonth",w),w}getMonthName(g){switch(g+1){case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"10";case 11:return"11";case 12:return"12";default:return"|"+g}}getWeekDayName(g){switch(g){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thu";case 5:return"Fri";case 6:return"Sat";default:return""}}setData(g,C){g&&(g.feelings=C)}getDateFormatted(g){return`${g.getFullYear()}-${("0"+(1+g.getMonth())).slice(-2)}-${("0"+g.getDate()).slice(-2)}`}createDay(g,C,w){const P=new e;return P.date=new Date(g,C,w),P.year=g,P.monthIndex=C,P.weekDayNumber=0===P.date.getDay()?7:P.date.getDay(),P.dayNumber=w,P.feelings=["none","none","none"],P.summary="",P.diary=[],P.keywords=[],P.recording={},P}}return y.\u0275fac=function(g){return new(g||y)(l.LFG(h.eN))},y.\u0275prov=l.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},2561:(oe,$,p)=>{p.d($,{m:()=>q});var h=p(655),e=p(2096),l=p(7590),S=p(9808);function y(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.selectFeeling(r))}),e._UZ(1,"ion-img",6),e.TgZ(2,"p"),e._uU(3),e.qZA()()}if(2&i){const t=d.$implicit,n=d.index,r=e.oxw();e.xp6(1),e.MGl("src","./assets/feeling/",t,".svg"),e.xp6(2),e.Oqu(r.feelings[n])}}let V=(()=>{class i{constructor(t,n){this.popoverCtrl=t,this.journalCreator=n,this.imgList=this.journalCreator.getImgList,this.feelings=this.journalCreator.getFeelings}ngOnInit(){0===this.time?this.timeStr="\uccab\ubc88\uc9f8":1===this.time?this.timeStr="\ub450\ubc88\uc9f8":2===this.time&&(this.timeStr="\uc138\ubc88\uc9f8")}deleteFeeling(){this.popoverCtrl.dismiss({feeling:"none",time:this.time},"confirm")}selectFeeling(t){const n=t.target;if(n.closest("div")){const s=n.closest("div").children[0].src.slice(16,-4),b=this.journalCreator.getFeelingName(s);this.popoverCtrl.dismiss({feeling:s,time:this.time,name:b},"confirm")}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.Dh),e.Y36(q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-set-feeling"]],inputs:{time:"time"},decls:10,vars:2,consts:[[1,"popoverContainer","ion-padding"],[1,"popoverHeader"],["src","./assets/feel_tab.svg",1,"imgContainer"],[1,"customBtn",3,"click"],["class","feelContainer",3,"click",4,"ngFor","ngForOf"],[1,"feelContainer",3,"click"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div"),e._UZ(3,"ion-img",2),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"button",3),e.NdJ("click",function(){return n.deleteFeeling()}),e._uU(7,"X"),e.qZA()(),e.TgZ(8,"div"),e.YNc(9,y,4,2,"div",4),e.qZA()()),2&t&&(e.xp6(5),e.hij(" \uc624\ub298 ",n.timeStr," \uae30\ubd84\uc740 \uc5b4\ub5a4\uac00\uc694? "),e.xp6(4),e.Q6J("ngForOf",n.imgList))},dependencies:[S.sg,l.W2,l.Xz],styles:[".popoverHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:14px}.popoverHeader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.popoverHeader[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]{margin-right:0}.popoverHeader[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]:hover{color:var(--red-color)}.popoverHeader[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{width:250px;margin:auto}.imgContainer[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px}.feelContainer[_ngcontent-%COMP%]{width:50px;height:60px;display:inline-block;margin:5px}.feelContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.feelContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin:auto;width:40px;height:40px}.feelContainer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:13px;color:#7e7e7e}"]}),i})();var g=p(913),C=p(7423),w=(()=>{return(i=w||(w={})).Documents="DOCUMENTS",i.Data="DATA",i.Library="LIBRARY",i.Cache="CACHE",i.External="EXTERNAL",i.ExternalStorage="EXTERNAL_STORAGE",w;var i})();const T=(0,C.fo)("Filesystem",{web:()=>p.e(6364).then(p.bind(p,6364)).then(i=>new i.FilesystemWeb)}),A=(0,C.fo)("VoiceRecorder",{web:()=>p.e(797).then(p.bind(p,797)).then(i=>new i.VoiceRecorderWeb)});var U=p(520);let te=(()=>{class i{constructor(t){this.http=t}addRecording(t,n){const r=new File([t],"my-file.wav",{type:"audio/x-wav"}),s=new DataTransfer;s.items.add(r),console.log(s.files[0]);const b=new FormData;b.append("date",n),b.append("email","client1@test.com"),b.append("file",s.files[0]),console.log("click",b.get("file"));const Z={headers:new U.WM({"MIME-Type":"audio/x-wav"})};return this.http.post("/recording/DiaryStt/",b,Z)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(U.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function L(i,d){1&i&&e._UZ(0,"ion-img",13),2&i&&e.MGl("src","./assets/feeling/",d.$implicit,".svg")}function B(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onPlayClicked())}),e._UZ(1,"ion-icon",15),e.qZA()}}function x(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onPauseClicked())}),e._UZ(1,"ion-icon",17),e.qZA()}}function ie(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,b=e.oxw();return e.KtG(b.playFile(s))}),e._uU(1),e.qZA()}if(2&i){const t=d.$implicit;e.Q6J("id",t.name),e.xp6(1),e.hij(" ",t.name," ")}}let ue=(()=>{class i{constructor(t,n,r){this.media=t,this.modalCtrl=n,this.recordService=r,this.recordingData=new e.vpe,this.isProcessing=new e.vpe,this.imgList=["happy","soso","good","excite","great","uneasy","sad","not_good","lonely","depressed","surprise","upset","unpleasant"],this.feelings=[],this.numbers=[],this.isRecording=!1,this.isPaused=!1,this.storedFileNames=[],this.duration=0,this.durationDisplay="0.00",this.interval=null,this.recordData=null}ngOnInit(){for(let t=0;t<3;t++){let n=this.getRandomInt(this.imgList.length);for(;this.numbers.includes(n);)n=this.getRandomInt(this.imgList.length);this.feelings.push(this.imgList[n]),this.numbers.push(n)}A.requestAudioRecordingPermission()}getRandomInt(t){return Math.floor(Math.random()*t)}timeCalc(){if(this.isPaused)return;if(!this.isRecording)return this.duration=0,void(this.durationDisplay="0.00");this.duration+=1;const t=Math.floor(this.duration/60),n=(this.duration%60).toString().padStart(2,"0");this.durationDisplay=t+":"+n,setTimeout(()=>{this.timeCalc()},1e3)}onPlayClicked(){if(!this.isRecording){if(!this.isRecording&&this.isPaused)return this.isRecording=!0,this.isPaused=!1,this.timeCalc(),A.resumeRecording();this.isRecording=!0,A.startRecording(),this.timeCalc()}}onPauseClicked(){this.isPaused||(clearInterval(this.interval),this.isRecording=!1,this.isPaused=!0,A.pauseRecording())}onStopClicked(){!this.isRecording||(clearInterval(this.interval),this.isRecording=!1,this.timeCalc(),A.stopRecording().then(t=>(0,h.mG)(this,void 0,void 0,function*(){if(t.value&&t.value.recordDataBase64){const n=t.value.recordDataBase64;this.recordData=n;const s=(new Date).getTime()+".wav";yield T.writeFile({path:s,directory:w.Data,data:n}),this.sendRecord()}})))}playFile(t){return(0,h.mG)(this,void 0,void 0,function*(){const r=(yield T.readFile({path:t.name,directory:w.Data})).data,s=new Audio(`data:audio/webm;base64,${r}`);this.recordData=s.src,console.log(this.recordData),s.oncanplaythrough=()=>s.play(),s.load()})}loadFiles(){return(0,h.mG)(this,void 0,void 0,function*(){T.readdir({path:"",directory:w.Data}).then(t=>{this.storedFileNames=t.files})})}sendRecord(t=this.recordData){return(0,h.mG)(this,void 0,void 0,function*(){this.isProcessing.emit(!0),yield this.recordService.addRecording(t,this.today).subscribe(n=>{console.log(n),this.recordingData.emit({msg:"success",res:n})},n=>{console.error(n),this.recordingData.emit({msg:"fail",err:n})},()=>{}),this.modalCtrl.dismiss("","pending")})}onFileUpload(t){const r=t.currentTarget.files;console.log(r),r&&this.recordService.addRecording(r[0],this.today)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.pU),e.Y36(l.IN),e.Y36(te))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recording"]],inputs:{today:"today"},outputs:{recordingData:"recordingData",isProcessing:"isProcessing"},decls:20,vars:6,consts:[[1,"ion-padding","dFlex","modal-inner"],[1,"imgContainer","ion-padding"],["src","./assets/feel_tab.svg"],[3,"src",4,"ngFor","ngForOf"],[1,"ion-text-center"],[2,"height","100px"],[1,"dFlex"],["color","custom","shape","circle",1,"stopBtn",3,"disabled","click"],["slot","icon-only","size","large","name","stop"],["class","playBtn","size","large","color","custom","shape","circle",3,"click",4,"ngIf"],["class","pauseBtn","size","large","color","custom","shape","circle",3,"click",4,"ngIf"],[1,"redDot"],["button","",3,"id","click",4,"ngFor","ngForOf"],[3,"src"],["size","large","color","custom","shape","circle",1,"playBtn",3,"click"],["slot","icon-only","name","play","size","large"],["size","large","color","custom","shape","circle",1,"pauseBtn",3,"click"],["slot","icon-only","name","pause","size","large"],["button","",3,"id","click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1),e._UZ(2,"ion-img",2),e.YNc(3,L,1,1,"ion-img",3),e.qZA(),e.TgZ(4,"p",4),e._uU(5,"\uc624\ub298 \ud558\ub8e8\ub97c \uae30\ub85d \uc911\uc774\uc608\uc694 :)"),e.qZA(),e.TgZ(6,"ion-grid",5)(7,"ion-row")(8,"ion-col",6)(9,"ion-button",7),e.NdJ("click",function(){return n.onStopClicked()}),e._UZ(10,"ion-icon",8),e.qZA()(),e.TgZ(11,"ion-col",6),e.YNc(12,B,2,0,"ion-button",9),e.YNc(13,x,2,0,"ion-button",10),e.qZA(),e.TgZ(14,"ion-col",6),e._UZ(15,"div",11),e.TgZ(16,"p"),e._uU(17),e.qZA()()()(),e.TgZ(18,"ion-list"),e.YNc(19,ie,2,2,"ion-item",12),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.feelings),e.xp6(6),e.Q6J("disabled",!n.isRecording),e.xp6(3),e.Q6J("ngIf",!n.isRecording),e.xp6(1),e.Q6J("ngIf",n.isRecording),e.xp6(4),e.Oqu(n.durationDisplay),e.xp6(2),e.Q6J("ngForOf",n.storedFileNames))},dependencies:[S.sg,S.O5,l.YG,l.wI,l.W2,l.jY,l.gu,l.Xz,l.Ie,l.q_,l.Nd],styles:[".imgContainer[_ngcontent-%COMP%]{margin:20px auto;width:100px;height:70px;position:relative}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{position:absolute;width:30%;height:30%}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(1){width:60%;height:60%;bottom:0;left:18px}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(2){top:20px;left:-10px}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(3){top:0px;right:35px}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]:nth-child(4){bottom:15px;right:-10px}.redDot[_ngcontent-%COMP%]{width:5px;height:5px;border-radius:50%;background-color:red;margin-right:5px}"]}),i})();var G=p(4182);const re=["inputEl"];function se(i,d){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.show)}}let ae=(()=>{class i{constructor(t){this.popoverCtrl=t,this.show=!1,this.keywordVal=""}ngOnInit(){console.log(document.activeElement)}ngAfterViewInit(){setTimeout(()=>{this.inputEl.setFocus()},100)}chkDuplication(){return this.keywordVal.trim().length<1?(this.show="\ud55c \uae00\uc790 \uc774\uc0c1\uc758 \ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",!1):!this.keywords.includes(this.keywordVal)||(this.show="\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ud0a4\uc6cc\ub4dc\uc785\ub2c8\ub2e4.",!1)}onKeyPress(t){if(this.show=!1,"Enter"===t.key&&this.chkDuplication())return this.onAdd()}onCancel(){this.popoverCtrl.dismiss(null,"cancel")}onAdd(){this.chkDuplication()&&(this.inputEl.value="",this.keywords.push(this.keywordVal))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.Dh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-keyword"]],viewQuery:function(t,n){if(1&t&&e.Gf(re,5),2&t){let r;e.iGM(r=e.CRH())&&(n.inputEl=r.first)}},inputs:{keywords:"keywords"},decls:11,vars:2,consts:[[1,"ion-padding"],[1,"w100"],[1,"customBtn","closeBtn",3,"click"],[1,"mainDiv"],[1,"inputDiv"],["placeholder","\ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694","autofocus","",3,"ngModel","ngModelChange","keypress"],["inputEl",""],[4,"ngIf"],[1,"customBtn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"span",1)(2,"button",2),e.NdJ("click",function(){return n.onCancel()}),e._uU(3," X "),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"ion-input",5,6),e.NdJ("ngModelChange",function(s){return n.keywordVal=s})("keypress",function(s){return n.onKeyPress(s)}),e.qZA(),e.YNc(8,se,2,1,"p",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.onAdd()}),e._uU(10," \ub354\ud558\uae30 "),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngModel",n.keywordVal),e.xp6(2),e.Q6J("ngIf",n.show))},dependencies:[S.O5,G.JJ,G.On,l.W2,l.pK,l.j9],styles:["span.w100[_ngcontent-%COMP%]{display:block;text-align:right}.closeBtn[_ngcontent-%COMP%]{margin-top:-5px;padding:0}.closeBtn[_ngcontent-%COMP%]:hover{color:var(--red-color)}.mainDiv[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mainDiv[_ngcontent-%COMP%]   .inputDiv[_ngcontent-%COMP%]{width:100%}.mainDiv[_ngcontent-%COMP%]   .inputDiv[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-left:8px;font-size:14px;color:var(--dark-gray-color)}.mainDiv[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]{width:60px;padding:10px 5px;margin:0}.mainDiv[_ngcontent-%COMP%]   .customBtn[_ngcontent-%COMP%]:hover{color:var(--active-color)}ion-input[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:15px}ion-input[_ngcontent-%COMP%]:focus-within{border-color:var(--middle-purple-color);color:#000}"]}),i})();const ce=["inputEl"];let ge=(()=>{class i{constructor(t){this.modalCtrl=t,this.val=""}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.inputEl.setFocus();for(const t of this.diary)this.val+=t.sentence+" "},100)}onCancel(){this.modalCtrl.dismiss(null,"cancel")}onSave(){this.modalCtrl.dismiss(this.val,"confirm")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-writing"]],viewQuery:function(t,n){if(1&t&&e.Gf(ce,5),2&t){let r;e.iGM(r=e.CRH())&&(n.inputEl=r.first)}},inputs:{diary:"diary"},decls:11,vars:1,consts:[[1,"ion-padding"],[3,"click"],["autoGrow","","placeholder","\uc624\ub298\uc758 \uc77c\uae30\ub97c \uc791\uc131\ud574\uc8fc\uc138\uc694.",3,"ngModel","ngModelChange"],["inputEl",""]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"p"),e._uU(2," \uc9c1\uc811 \uc791\uc131\ud558\uae30 "),e.qZA(),e.TgZ(3,"ion-buttons")(4,"ion-button",1),e.NdJ("click",function(){return n.onCancel()}),e._uU(5,"\ucde8\uc18c"),e.qZA(),e.TgZ(6,"ion-button",1),e.NdJ("click",function(){return n.onSave()}),e._uU(7,"\uc800\uc7a5"),e.qZA()()(),e.TgZ(8,"ion-content")(9,"ion-textarea",2,3),e.NdJ("ngModelChange",function(s){return n.val=s}),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("ngModel",n.val))},dependencies:[G.JJ,G.On,l.YG,l.Sm,l.W2,l.Gu,l.g2,l.j9],styles:["ion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),i})();var c=p(2181);function o(i,d){1&i&&e._UZ(0,"ion-icon",20)}function a(i,d){if(1&i&&e._UZ(0,"ion-img",21),2&i){const t=e.oxw(),n=t.$implicit,r=t.index,s=e.oxw();e.MGl("src","./assets/feeling",n,".svg"),e.Q6J("alt",s.feelNames[r])}}function f(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-col",13)(1,"ion-card",14),e.NdJ("click",function(r){const b=e.CHM(t).index,Z=e.oxw();return e.KtG(Z.onSetFeeling(r,b))}),e.TgZ(2,"p",15),e._uU(3),e.qZA(),e.TgZ(4,"div",16),e.YNc(5,o,1,0,"ion-icon",17),e.YNc(6,a,1,2,"ion-img",18),e.qZA(),e.TgZ(7,"p",19),e._uU(8),e.qZA()()()}if(2&i){const t=d.$implicit,n=d.index,r=e.oxw();e.xp6(1),e.Q6J("id","timeCard"+n),e.xp6(2),e.Oqu(0===n?"\uccab\ubc88\uc9f8":1===n?"\ub450\ubc88\uc9f8":"\uc138\ubc88\uc9f8"),e.xp6(1),e.ekj("iconBack","none"===t),e.xp6(1),e.Q6J("ngIf","none"===t),e.xp6(1),e.Q6J("ngIf","none"!==t),e.xp6(2),e.Oqu(r.feelNames[n])}}function _(i,d){if(1&i&&(e.TgZ(0,"ion-row",22)(1,"ion-card",23)(2,"ion-card-content",24)(3,"p",25),e._uU(4),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.processMsg)}}function u(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-row",36)(1,"div",37),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",38)(4,"ion-input",39),e.NdJ("ngModelChange",function(r){const b=e.CHM(t).index,Z=e.oxw(3);return e.KtG(Z.diary[b].sentence=r)}),e.qZA()(),e.TgZ(5,"ion-col",40)(6,"button",41),e.NdJ("click",function(){const s=e.CHM(t).$implicit,b=e.oxw(3);return e.KtG(b.onSentDelete(s))}),e._uU(7,"X"),e.qZA()()()}if(2&i){const t=d.$implicit,n=d.index,r=e.oxw(3);e.xp6(2),e.hij(" ",t.time," "),e.xp6(2),e.Q6J("ngModel",r.diary[n].sentence)}}function k(i,d){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,u,8,2,"ion-row",35),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.diary)}}function m(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"ion-badge",43),e.NdJ("click",function(){const s=e.CHM(t).$implicit,b=e.oxw(3);return e.KtG(b.onBadgeClicked(s))}),e._uU(1),e.qZA()}if(2&i){const t=d.$implicit;e.xp6(1),e.hij(" ",t," ")}}function D(i,d){if(1&i&&(e.TgZ(0,"span"),e.YNc(1,m,2,1,"ion-badge",42),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.keywords)}}function M(i,d){if(1&i){const t=e.EpF();e.TgZ(0,"span")(1,"ion-row")(2,"ion-card",23)(3,"p",26),e._uU(4,"\ud55c \uc904 \uc77c\uae30"),e.qZA(),e.TgZ(5,"ion-card-content",27)(6,"ion-input",28),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.summary=r)})("ionFocus",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onSummaryFocus(r))}),e.qZA()()()(),e.TgZ(7,"ion-row")(8,"ion-card",23)(9,"p",26),e._uU(10,"\uc624\ub298\uc758 \uc77c\uae30"),e.qZA(),e.TgZ(11,"ion-card-content",27),e.YNc(12,k,2,1,"div",10),e.TgZ(13,"ion-buttons",29)(14,"ion-button",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.writeDiary())}),e._UZ(15,"ion-img",31),e._uU(16," \ubc14\ub85c \uc791\uc131\ud558\uae30 "),e.qZA(),e.TgZ(17,"ion-button",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onRecording())}),e._UZ(18,"ion-img",32),e._uU(19," \ub179\uc74c\ud558\uae30 "),e.qZA()()()()(),e.TgZ(20,"ion-row")(21,"ion-card",23)(22,"p",26),e._uU(23,"\ud0a4\uc6cc\ub4dc"),e.qZA(),e.TgZ(24,"span",33),e.YNc(25,D,2,1,"span",10),e.TgZ(26,"ion-icon",34),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onKeywordCreate(r))}),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("disabled",!t.summary)("ngModel",t.summary),e.xp6(6),e.Q6J("ngIf",t.diary),e.xp6(13),e.Q6J("ngIf",t.keywords)}}let z=(()=>{class i{constructor(t,n,r,s,b,Z){this.journalCreator=t,this.modalCtrl=n,this.calendarService=r,this.popoverCtrl=s,this.actionSheetCtrl=b,this.alertController=Z,this.year=0,this.month="",this.dayNumber=1,this.feelings=["none","none","none"],this.feelNames=["\uc120\ud0dd\ud574\uc8fc\uc138\uc694","\uc120\ud0dd\ud574\uc8fc\uc138\uc694","\uc120\ud0dd\ud574\uc8fc\uc138\uc694"],this.summary="",this.diary=[],this.keywords=[],this.isProcessing=!1,this.processMsg="",this.temp=!0,this.feelingList=this.journalCreator.getFeelings}ngOnInit(){this.feelings=this.day.feelings.slice();for(let t=0;t<this.feelings.length;t++)this.feelNames[t]=this.journalCreator.getFeelingName(this.feelings[t]);this.month=this.calendarService.getMonthName(this.day.monthIndex),this.summary=this.day.summary||"",this.diary=this.day.diary||null,this.keywords=this.day.keywords||[]}ngAfterViewInit(){}alertDismiss(t){return(0,h.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({header:t,cssClass:"custom-alert",buttons:[{text:"\ucde8\uc18c",role:"cancel"},{text:"\ud655\uc778",role:"confirm"}]});yield n.present();const{role:r}=yield n.onDidDismiss();return r})}onCancel(){return(0,h.mG)(this,void 0,void 0,function*(){"confirm"===(yield this.alertDismiss("\uc800\uc7a5\ud558\uc9c0 \uc54a\uace0 \ub098\uac00\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))?this.modalCtrl.dismiss(null,"cancel"):console.log("canceled")})}onJournalConfirm(){return(0,h.mG)(this,void 0,void 0,function*(){this.modalCtrl.dismiss({date:this.day.date,dayNumber:this.day.dayNumber,year:this.day.year,monthIndex:this.day.monthIndex,weekDayNumber:this.day.weekDayNumber,feelings:this.feelings,summary:this.summary,diary:this.diary,keywords:this.keywords,recording:this.day.recording,isShare:this.checked},"confirm")})}onRecording(){return(0,h.mG)(this,void 0,void 0,function*(){this.processMsg="";const t=new e.vpe;t.subscribe(s=>{if(console.log(s),"success"===s.msg){const b=s.res[0];for(const Z of b.sentence)console.log(Z),this.diary.push({time:Z.start,sentence:Z.sentence});this.summary=b.summary[0],this.keywords.push(...b.keyword),this.keywords=[...new Set(this.keywords)],this.keywords.length>10&&(this.journalCreator.presentToast("\ud0a4\uc6cc\ub4dc\ub294 \ucd5c\ub300 10\uac1c\uae4c\uc9c0 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),this.keywords=[...this.keywords].slice(0,10),console.log(this.keywords)),this.processMsg=""}else"fail"===s.msg&&(this.processMsg="\ubcc0\ud658\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.");this.isProcessing=!1});const n=new e.vpe;n.subscribe(s=>{this.isProcessing=s,this.processMsg="\ubcc0\ud658 \uc911..."}),yield this.modalCtrl.create({component:ue,componentProps:{today:`${this.day.year}-${this.month}-${this.day.dayNumber}`,recordingData:t,isProcessing:n},cssClass:"recordingModal dFlex auto-height",breakpoints:[0,.5,.7,1],initialBreakpoint:.5}).then(s=>(s.present(),s.onDidDismiss())).then(s=>{if(console.log(s),"confirm"===s.role){const b=s.data;for(const Z of b.sentence)this.diary.push({time:Z.start,sentence:Z.sentence});this.keywords.push(b.sentimental[0].senti),this.keywords=[...new Set(this.keywords)],this.keywords.length>10&&(this.journalCreator.presentToast("\ud0a4\uc6cc\ub4dc\ub294 \ucd5c\ub300 10\uac1c\uae4c\uc9c0 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),this.keywords=[...this.keywords].slice(0,10),console.log(this.keywords)),this.isProcessing=!1}})})}onSentDelete(t){this.diary=this.diary.filter(n=>n!==t)}writeDiary(){this.modalCtrl.create({component:ge,componentProps:{diary:this.diary},cssClass:"writingModal dFlex",breakpoints:[0,.5,.9],initialBreakpoint:.5}).then(t=>(t.present(),t.onDidDismiss())).then(t=>{"confirm"===t.role&&this.diary.push({time:0,sentence:t.data})})}onSummaryFocus(t){}onSetFeeling(t,n){let r=t.target;t.target.classList.contains("timeCard")||(r=t.target.closest(".timeCard")),this.popoverCtrl.create({component:V,componentProps:{time:n},cssClass:"set-feeling-popover",event:t,translucent:!0,trigger:`timeCard${n}`,reference:"trigger",alignment:"center",mode:"md"}).then(s=>(s.present(),s.onDidDismiss())).then(s=>{"confirm"===s.role&&(console.log(s.data),this.feelings[s.data.time]=s.data.feeling,this.feelNames[s.data.time]=s.data.name)})}onKeywordCreate(t){this.popoverCtrl.create({component:ae,componentProps:{keywords:this.keywords},cssClass:"add-keyword-popover",event:t,translucent:!0,alignment:"center",mode:"md"}).then(n=>(n.present(),n.onDidDismiss())).then(n=>{"confirm"===n.role&&console.log(this.keywords),console.log(n)})}onBadgeClicked(t){this.keywords=this.keywords.filter(n=>n!==t)}onShare(){this.checked&&this.journalCreator.presentToast("\uc624\ub298\uc758 \uc77c\uae30 \uc804\uccb4 \ub0b4\uc6a9\uc740 \uc81c\uc678\ud558\uace0 \uacf5\uc720\ub3fc\uc694.")}presentActionSheet(){return(0,h.mG)(this,void 0,void 0,function*(){const t=yield this.actionSheetCtrl.create({header:`${this.day.year}/${this.month}/${this.day.dayNumber}\uc758 \uc77c\uae30\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?`,buttons:[{text:"Delete",role:"destructive",data:{action:"delete"}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}],mode:"ios"});yield t.present(),"destructive"===(yield t.onDidDismiss()).role&&this.deleteDiary()})}deleteDiary(){this.feelings=["none","none","none"],this.diary=[],this.keywords=[],this.summary="",this.day.feelings=["none","none","none"],this.day.summary="",this.day.diary=[],this.day.keywords=[],this.day.recording={},this.onJournalConfirm()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q),e.Y36(l.IN),e.Y36(c.o),e.Y36(l.Dh),e.Y36(l.BX),e.Y36(l.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-journal"]],inputs:{day:"day"},decls:21,vars:7,consts:[["slot","start"],["defaultHref","/tabs/tab2",3,"click"],["slot","end",1,"container"],[1,"shareText"],["color","custom","enable-on-off-labels","\uacf5\uc720",1,"shareToggle",3,"ngModel","ngModelChange","ionChange"],["shape","round",1,"trashBtn",3,"click"],["name","trash-bin-outline"],[1,"ion-margin"],["class","w100 ion-no-margin",4,"ngFor","ngForOf"],["class","processMsgRow",4,"ngIf"],[4,"ngIf"],[1,"dFlex"],["shape","round","color","custom",3,"click"],[1,"w100","ion-no-margin"],[1,"ion-padding","ion-no-margin","timeCard",3,"id","click"],[1,"ion-text-center","textBlack"],[1,"imgContainer","dFlex","feelingDiv"],["name","add-circle","size","large","color","medium",4,"ngIf"],[3,"src","alt",4,"ngIf"],[1,"ion-text-center",2,"font-size","13px"],["name","add-circle","size","large","color","medium"],[3,"src","alt"],[1,"processMsgRow"],[1,"ion-padding","w100"],[1,"ion-no-padding","processMsgContent"],[1,"processMsg"],[1,"textBlack"],[1,"ion-no-padding"],["id","summary","placeholder","\uc624\ub298\uc758 \uc77c\uae30\ub97c \ub179\uc74c \ud6c4 \ud3b8\uc9d1\ud560 \uc218 \uc788\uc5b4\uc694","value","summary",3,"disabled","ngModel","ngModelChange","ionFocus"],[1,"ion-justify-content-center","diaryBtns"],["shape","round","fill","solid","color","medium",1,"diaryBtn",3,"click"],["src","./assets/write_w.svg"],["src","./assets/recording_w.svg"],[1,"dFlex","ion-wrap","keywordBadges"],["name","add-circle","size","large","color","medium",1,"keywordIcon",3,"click"],["id","diary",4,"ngFor","ngForOf"],["id","diary"],[1,"ion-padding-horizontal","ion-margin-end","w100","diaryTime"],["size","10"],["value","sent.diary",3,"ngModel","ngModelChange"],["size","2"],[1,"customBtn",3,"click"],["size","large","class","keywordBadge",3,"click",4,"ngFor","ngForOf"],["size","large",1,"keywordBadge",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-back-button",1),e.NdJ("click",function(){return n.onCancel()}),e.qZA()(),e.TgZ(4,"ion-title"),e._uU(5),e.qZA(),e.TgZ(6,"ion-buttons",2)(7,"p",3),e._uU(8," \uacf5\uc720 "),e.qZA(),e.TgZ(9,"ion-toggle",4),e.NdJ("ngModelChange",function(s){return n.checked=s})("ionChange",function(){return n.onShare()}),e.qZA(),e.TgZ(10,"ion-button",5),e.NdJ("click",function(){return n.presentActionSheet()}),e._UZ(11,"ion-icon",6),e.qZA()()()(),e.TgZ(12,"ion-content")(13,"ion-grid")(14,"ion-row",7),e.YNc(15,f,9,7,"ion-col",8),e.qZA(),e.YNc(16,_,5,1,"ion-row",9),e.YNc(17,M,27,4,"span",10),e.qZA()(),e.TgZ(18,"ion-footer",11)(19,"ion-button",12),e.NdJ("click",function(){return n.onJournalConfirm()}),e._uU(20," \uc800\uc7a5\ud558\uae30 "),e.qZA()()),2&t&&(e.xp6(5),e.lnq("",n.day.year,"\ub144 ",n.month,"\uc6d4 ",n.day.dayNumber,"\uc77c"),e.xp6(4),e.Q6J("ngModel",n.checked),e.xp6(6),e.Q6J("ngForOf",n.feelings),e.xp6(1),e.Q6J("ngIf",n.processMsg),e.xp6(1),e.Q6J("ngIf",!n.isProcessing))},dependencies:[S.sg,S.O5,G.JJ,G.On,l.oU,l.yp,l.YG,l.Sm,l.PM,l.FN,l.wI,l.W2,l.fr,l.jY,l.Gu,l.gu,l.Xz,l.pK,l.Nd,l.wd,l.ho,l.sr,l.w,l.j9,l.cs],styles:['.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%}.container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{color:var(--active-color)}.container[_ngcontent-%COMP%]   ion-button.activateBtn[_ngcontent-%COMP%]{background-color:var(--middle-purple-color);color:var(--active-color)}.container[_ngcontent-%COMP%]   ion-button.trashBtn[_ngcontent-%COMP%]:hover{color:var(--red-color)}ion-title[_ngcontent-%COMP%]{font-size:15px;font-weight:900}.shareText[_ngcontent-%COMP%]{font-size:13px}.shareToggle[_ngcontent-%COMP%]{padding-left:2px;padding-right:5px}.timeCard[_ngcontent-%COMP%]:hover{cursor:pointer}ion-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}.marginVertical[_ngcontent-%COMP%]{margin:16px 0}.imgContainer[_ngcontent-%COMP%]{width:60px;height:60px;margin:auto}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}.iconBack[_ngcontent-%COMP%]{background-image:url(/assets/feeling/empty.svg);background-color:transparent;background-position:center center;background-repeat:no-repeat;background-size:100% 100%}.feelingDiv[_ngcontent-%COMP%]:hover{cursor:pointer;transition:background-color .3s;background-color:#f9f9f9;border-radius:50%}ion-input#summary[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:15px}ion-input#summary[_ngcontent-%COMP%]:focus-within{border-color:var(--middle-purple-color);color:#000}.diaryTime[_ngcontent-%COMP%]{display:block;color:var(--gray-color);margin-bottom:-10px}.diaryBtns[_ngcontent-%COMP%]   .diaryBtn[_ngcontent-%COMP%]{margin:8px}.diaryBtns[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin-right:5px}.customBtn[_ngcontent-%COMP%]{color:var(--red-color)}.customBtn[_ngcontent-%COMP%]:hover{background-color:var(--middle-red-color)}.keywordBadge[_ngcontent-%COMP%]{margin:8px 4px;background-color:var(--keyword-color);border-radius:30px;color:#000}.keywordBadge[_ngcontent-%COMP%]:nth-child(1){background-color:var(--keyword-first-color)}.keywordBadge[_ngcontent-%COMP%]:hover, .keywordIcon[_ngcontent-%COMP%]:hover{cursor:pointer}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 0 10px;height:50px;width:90%}.footer-md[_ngcontent-%COMP%]:before{width:0;height:0}.toggle-switch[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;font-size:13px;width:100px;height:30px;background-color:#ccc;border-radius:15px;position:relative;transition:background-color .2s ease}.toggle-label[_ngcontent-%COMP%]:before{content:"";position:absolute;top:3px;left:3px;width:50px;height:24px;border-radius:15px;background-color:#fff;transition:transform .2s ease}.share[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:50%;height:100%;line-height:30px;text-align:center;color:#fff}.exclusive[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:50%;height:100%;line-height:30px;text-align:center;color:#555}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background-color:var(--active-color)}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]:before{transform:translate(45px)}.processMsgRow[_ngcontent-%COMP%]   .processMsgContent[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:20px}.processMsgRow[_ngcontent-%COMP%]   .processMsgContent[_ngcontent-%COMP%]   .processMsg[_ngcontent-%COMP%]{text-align:center}@media only screen and (max-width: 320px){.imgContainer[_ngcontent-%COMP%]{width:50px;height:50px;margin:auto}.imgContainer[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:100%;height:100%}}']}),i})();var Y=p(5529);let q=(()=>{class i{constructor(t,n,r,s){this.modalCtrl=t,this.toastCtrl=n,this.calService=r,this.http=s,this._imgList=["happy","soso","good","excite","great","uneasy","sad","not_good","lonely","depressed","surprise","upset","unpleasant","idk","empty"],this._feelings=["\uc990\uac70\uc6cc","\uadf8\ub0e5 \uadf8\ub798","\uc88b\uc544!","\uc124\ub808","\ud589\ubcf5\ud574","\ubd88\uc548\ud574","\uc2ac\ud37c","\ubcc4\ub85c\uc57c","\uc678\ub85c\uc6cc","\uc6b0\uc6b8\ud574","\ub180\ub790\uc5b4","\ud654\ub0ac\uc5b4","\ubd88\ucf8c\ud574","\ubaa8\ub974\uaca0\uc5b4","\ube44\uc6cc\ub458\ub798"],this._today=new Date,this.journalData=new Y.xQ,this.getJournalData$=this.journalData.asObservable()}get getImgList(){return this._imgList}get getFeelings(){return this._feelings}get getToday(){return{date:this._today,year:this._today.getFullYear(),monthIndex:this._today.getMonth(),weekDayNumber:0,dayNumber:this._today.getDate(),feelings:["none","none","none"],summary:"",diary:[{time:0,sentence:"aaa"}],keywords:[],recording:{}}}getFeelingName(t){if("none"===t)return"\ube44\uc6cc\ub458\ub798";for(let n=0;n<this._imgList.length;n++)if(this._imgList[n]===t.slice(1,t.length))return this._feelings[n]}createJournal(t=this.getToday){return(0,h.mG)(this,void 0,void 0,function*(){const n={message:"DayDiary",email:"test@test.com",date:this.calService.getDateFormatted(t.date)};yield this.http.post("/api/DayDiary/",n,{headers:(new U.WM).set("Content-Type","application/json")}).toPromise().then(r=>{console.log("createJournal-1",r),"Data not exist"!==r.error?(t.feelings=JSON.parse(r.feelings.replace(/'/g,'"')),t.summary=r.summary,t.diary=JSON.parse(r.diary.replace(/'/g,'"')),t.keywords=JSON.parse(r.keywords.replace(/'/g,'"'))):(t.summary="",t.diary=[],t.keywords=[]),this.modalCtrl.create({component:z,componentProps:{day:t},cssClass:"diaryModal"}).then(s=>(s.present(),s.onDidDismiss())).then(s=>{if("confirm"===s.role){this.journalData.next(s.data);const b={message:"DiarySave",email:"test@test.com",date:this.calService.getDateFormatted(s.data.date),feelings:s.data.feelings,summary:s.data.summary,diary:s.data.diary,keywords:s.data.keywords};console.log(b),console.log("finalData feelings",b.feelings),this.http.post("/api/DiarySave/",b,{headers:(new U.WM).set("Content-Type","application/json")}).toPromise().then(Z=>{console.log("createJournal-2",Z),this.presentToast("\uac10\uc815 \uc801\ub9bd",t),this.calService.getCurrentMonth(this.getToday.monthIndex,this.getToday.year)}).catch(Z=>{this.presentToast("\uac10\uc815 \uc801\ub9bd \uc2e4\ud328"),console.log(Z)})}else console.log(s)})}).catch(r=>{console.log(r),this.modalCtrl.create({component:z,componentProps:{day:t},cssClass:"diaryModal"}).then(s=>(s.present(),s.onDidDismiss())).then(s=>{console.log(s)})})})}presentToast(t,n){return(0,h.mG)(this,void 0,void 0,function*(){const r=n?`${n.year}\ub144 ${n.monthIndex+1}\uc6d4 ${n.dayNumber}\uc77c\uc758`:"",s=yield this.toastCtrl.create({message:`\n      <p class="ion-text-center">\n      ${r}\n      ${t}\n      </p>\n      `,duration:2e3,cssClass:"journalToast"});yield s.present(),yield s.onDidDismiss()})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(l.IN),e.LFG(l.yF),e.LFG(c.o),e.LFG(U.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5652:(oe,$,p)=>{p.r($),p.d($,{TabsPageModule:()=>P});var h=p(7590),e=p(9808),l=p(4182),S=p(1741),y=p(2096),V=p(2561);const C=[{path:"tabs",component:(()=>{class v{constructor(T,A){this.journalService=T,this.router=A}onCreateJournal(){if("/tabs/tab2"!==this.router.url)return this.router.navigateByUrl("/tabs/tab2");this.journalService.createJournal()}}return v.\u0275fac=function(T){return new(T||v)(y.Y36(V.m),y.Y36(S.F0))},v.\u0275cmp=y.Xpm({type:v,selectors:[["app-tabs"]],decls:14,vars:0,consts:[["slot","bottom",2,"contain","none"],["tab","tab1"],["src","./assets/feel_tab.svg"],["tab","tab2",1,"middle-tab",3,"click"],["src","./assets/feel_tab_active.svg"],["tab","tab3"],["name","square"]],template:function(T,A){1&T&&(y.TgZ(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),y._UZ(3,"ion-img",2),y.TgZ(4,"ion-label"),y._uU(5,"Tab 1"),y.qZA()(),y.TgZ(6,"ion-tab-button",3),y.NdJ("click",function(){return A.onCreateJournal()}),y._UZ(7,"ion-img",4),y.TgZ(8,"ion-label"),y._uU(9,"Tab 2"),y.qZA()(),y.TgZ(10,"ion-tab-button",5),y._UZ(11,"ion-icon",6),y.TgZ(12,"ion-label"),y._uU(13,"Tab 3"),y.qZA()()()())},dependencies:[h.gu,h.Xz,h.Q$,h.yq,h.ZU,h.UN],styles:[".middle-tab[_ngcontent-%COMP%]{height:70px;border-radius:50%;background:white;z-index:100;max-width:70px;color:#0265ac;border:4px solid #0076c9;margin-top:-18px;border:1px solid #FAFAFA;box-shadow:0 2px 15px rgba(78,83,87,.184)}"]}),v})(),children:[{path:"tab1",loadChildren:()=>p.e(1835).then(p.bind(p,1835)).then(v=>v.Tab1PageModule)},{path:"tab2",loadChildren:()=>p.e(1913).then(p.bind(p,1913)).then(v=>v.Tab2PageModule)},{path:"tab3",loadChildren:()=>p.e(420).then(p.bind(p,420)).then(v=>v.Tab3PageModule)},{path:"",redirectTo:"/tabs/tab2",pathMatch:"full"}]},{path:"",redirectTo:"/tabs/tab1",pathMatch:"full"}];let w=(()=>{class v{}return v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=y.oAB({type:v}),v.\u0275inj=y.cJS({imports:[S.Bz.forChild(C)]}),v})(),P=(()=>{class v{}return v.\u0275fac=function(T){return new(T||v)},v.\u0275mod=y.oAB({type:v}),v.\u0275inj=y.cJS({imports:[h.Pc,e.ez,l.u5,w]}),v})()}}]);