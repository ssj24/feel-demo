{"version":3,"file":"src_app_tab1_tab1_module_ts.js","mappings":"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","sources":["./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","/* eslint-disable max-len */\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, AfterViewInit } from '@angular/core';\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\nexport class Tab1Page implements AfterViewInit{\n  startRecordButton: HTMLElement;\n  stopRecordButton: HTMLElement;\n  soundClips: HTMLElement;\n  constraints = {audio:true, video:false};\n  stream: any;\n  recorder: any;\n  chunks = [];\n  blob: Blob;\n  mRec: MediaRecorder;\n\n  constructor(public http: HttpClient) {\n  }\n  ngAfterViewInit(): void {\n    this.startRecordButton = document.getElementById('startRecordButton') as HTMLElement;\n    this.stopRecordButton = document.getElementById('stopRecordButton') as HTMLElement;\n    this.soundClips = document.getElementById('soundClipContainer') as HTMLElement;\n    this.startRecordButton.addEventListener('click', async () => {\n      if (navigator.mediaDevices) {\n        this.stream = await navigator.mediaDevices.getUserMedia(this.constraints);\n        const mediaOptions = {\n          mimeType:'audio/mpeg'\n        };\n        this.mRec = new MediaRecorder(this.stream);\n        // visualize(stream);\n        this.onStartRecord();\n      }\n    });\n    this.stopRecordButton.addEventListener('click', () => {\n        this.mRec.stop();\n        console.log(this.mRec.state);\n        console.log('recorder stopped');\n        this.stopRecordButton.setAttribute('disabled', '');\n        this.startRecordButton.removeAttribute('disabled');\n\n        const clipContainer = document.createElement('article');\n        const clipLabel = document.createElement('p');\n        const audio = document.createElement('audio');\n        const deleteButton = document.createElement('button');\n        const saveButton = document.createElement('button');\n        clipContainer.classList.add('clip');\n        audio.setAttribute('controls', '');\n        deleteButton.textContent = 'Delete';\n        saveButton.textContent = 'Save';\n        clipLabel.textContent = new Date().toTimeString();\n\n        clipContainer.appendChild(audio);\n        clipContainer.appendChild(clipLabel);\n        clipContainer.appendChild(deleteButton);\n        clipContainer.appendChild(saveButton);\n        this.soundClips.appendChild(clipContainer);\n\n        audio.controls = true;\n        this.blob = new Blob(this.chunks, { type: 'audio/ogg; codecs=opus' });\n        this.chunks = [];\n        const audioURL = URL.createObjectURL(this.blob);\n        audio.src = audioURL;\n        console.log('recorder stopped');\n        deleteButton.onclick = (e) => {\n          const evtTgt = e.target as HTMLElement;\n          evtTgt.parentNode.parentNode.removeChild(evtTgt.parentNode);\n        };\n        this.mRec.ondataavailable = (e) => {\n          this.chunks.push(e.data);\n        };\n        saveButton.addEventListener('click', () => this.onSave(this.blob));\n      });\n\n    }\n\n  async onStartRecord() {\n    this.mRec.start();\n    console.log(this.mRec.state);\n    console.log('recorder started');\n    this.startRecordButton.setAttribute('disabled', '');\n    this.stopRecordButton.removeAttribute('disabled');\n\n  }\n  onTest() {\n    const data = {\n      data: 'none'\n    };\n    this.http.post(`https://192.168.31.35/SttAnalysis/`, data, {\n      headers: new HttpHeaders()\n                .set('Content-Type', 'application/json')\n    })\n    .toPromise()\n    .then(res => {\n      console.log(res);\n      return res;\n    })\n    .catch(err => {\n      console.log(err);\n    });\n\n  }\n  async onSave(blob: Blob) {\n\n\n    const recordedFile = new File([blob], 'audiorecord_cur.ogg');\n    console.log(recordedFile);\n    const form = new FormData();\n    form.append('file', recordedFile);\n    const container = new DataTransfer();\n    container.items.add(recordedFile);\n    console.log(container);\n    const data = {\n      data: 'none'\n    };\n    // multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW\n    // application/json\n    this.http.post(`https://192.168.31.35/SttAnalysis/`, data, {\n      headers: new HttpHeaders()\n                .set('Content-Type', 'application/json')\n    })\n    .toPromise()\n    .then(res => {\n      console.log(res);\n      return res;\n    })\n    .catch(err => {\n      console.log(err);\n    });\n\n  }\n\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}